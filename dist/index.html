<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.3">
<title>How Exercise Duration Affects Sleep, Stress &amp; Productivity | VA Dashboard</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight,alt,wide.db1cdf55.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight,alt,wide.db1cdf55.css">
<link rel="modulepreload" href="./_observablehq/client.f3c63fa1.js">
<link rel="modulepreload" href="./_observablehq/runtime.e080113b.js">
<link rel="modulepreload" href="./_observablehq/stdlib.82806664.js">
<link rel="modulepreload" href="./_node/@observablehq/plot@0.6.17/index.28168f6d.js">
<link rel="modulepreload" href="./_node/d3@7.9.0/index.6063bdcc.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/72f4716c.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/9cffc2bd.js">
<link rel="modulepreload" href="./_node/isoformat@0.2.1/index.0882e9d9.js">
<link rel="modulepreload" href="./_node/interval-tree-1d@1.0.4/index.eeaa354d.js">
<link rel="modulepreload" href="./_node/d3-array@3.2.4/index.f89e3560.js">
<link rel="modulepreload" href="./_node/d3-axis@3.0.0/index.34ded868.js">
<link rel="modulepreload" href="./_node/d3-brush@3.0.0/index.76e53644.js">
<link rel="modulepreload" href="./_node/d3-chord@3.0.1/index.eb7a3f59.js">
<link rel="modulepreload" href="./_node/d3-color@3.1.0/index.e8c126ff.js">
<link rel="modulepreload" href="./_node/d3-contour@4.0.2/index.dec5b7e9.js">
<link rel="modulepreload" href="./_node/d3-delaunay@6.0.4/index.1771ba9f.js">
<link rel="modulepreload" href="./_node/d3-dispatch@3.0.1/index.be49ca5f.js">
<link rel="modulepreload" href="./_node/d3-drag@3.0.0/index.d3ae5f0f.js">
<link rel="modulepreload" href="./_node/d3-dsv@3.0.1/index.48418e2e.js">
<link rel="modulepreload" href="./_node/d3-ease@3.0.1/index.09153f73.js">
<link rel="modulepreload" href="./_node/d3-fetch@3.0.1/index.2c1c499d.js">
<link rel="modulepreload" href="./_node/d3-force@3.0.0/index.952bd793.js">
<link rel="modulepreload" href="./_node/d3-format@3.1.0/index.da30fb93.js">
<link rel="modulepreload" href="./_node/d3-geo@3.1.1/index.0cc60a7f.js">
<link rel="modulepreload" href="./_node/d3-hierarchy@3.1.2/index.0a013d9a.js">
<link rel="modulepreload" href="./_node/d3-interpolate@3.0.1/index.7ed7c7fe.js">
<link rel="modulepreload" href="./_node/d3-path@3.1.0/index.c2b3c473.js">
<link rel="modulepreload" href="./_node/d3-polygon@3.0.1/index.32c3d834.js">
<link rel="modulepreload" href="./_node/d3-quadtree@3.0.1/index.e9fed2eb.js">
<link rel="modulepreload" href="./_node/d3-random@3.0.1/index.fd2cc361.js">
<link rel="modulepreload" href="./_node/d3-scale@4.0.2/index.0574410e.js">
<link rel="modulepreload" href="./_node/d3-scale-chromatic@3.1.0/index.7961cbed.js">
<link rel="modulepreload" href="./_node/d3-selection@3.0.0/index.13204b25.js">
<link rel="modulepreload" href="./_node/d3-shape@3.2.0/index.b551bc1c.js">
<link rel="modulepreload" href="./_node/d3-time@3.1.0/index.8fcc123e.js">
<link rel="modulepreload" href="./_node/d3-time-format@4.1.0/index.08e7c36a.js">
<link rel="modulepreload" href="./_node/d3-timer@3.0.1/index.0ee6092b.js">
<link rel="modulepreload" href="./_node/d3-transition@3.0.1/index.d140d658.js">
<link rel="modulepreload" href="./_node/d3-zoom@3.0.0/index.78e4486d.js">
<link rel="modulepreload" href="./_node/binary-search-bounds@2.0.5/index.990a1c6d.js">
<link rel="modulepreload" href="./_node/internmap@2.0.3/index.4106013c.js">
<link rel="modulepreload" href="./_node/delaunator@5.0.1/index.70ae1478.js">
<link rel="modulepreload" href="./_node/robust-predicates@3.0.2/index.bdc459cc.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.f3c63fa1.js";
import {registerFile} from "./_observablehq/stdlib.82806664.js";

registerFile("./data/sleep_cycle_productivity_verified_final.csv", {"name":"./data/sleep_cycle_productivity_verified_final.csv","mimeType":"text/csv","path":"./_file/data/sleep_cycle_productivity_verified_final.e2099d35.csv","lastModified":1746491517539,"size":441846});

define({id: "09901824", inputs: ["FileAttachment"], outputs: ["Plot","d3","sleepData","binOrder","validAgeGroups","groupedData","completeData","productivityLineChart","avgByBin","sleepProductivityComboChart","wellBeingData","wellBeingBarChart"], body: async (FileAttachment) => {
const [Plot, d3] = await Promise.all([import("./_node/@observablehq/plot@0.6.17/index.28168f6d.js"), import("./_node/d3@7.9.0/index.6063bdcc.js")]);

const sleepData = await FileAttachment("./data/sleep_cycle_productivity_verified_final.csv").csv();

// Define the desired order of exercise bins
const binOrder = ["0-15", "16-30", "31-45", "46-60", "61-75", "75+"];

const validAgeGroups = ["18-24", "25-34", "35-44", "45-54", "55+"];

const groupedData = Array.from(
  d3.group(
    sleepData,
    d => d["Age Group"].trim(),
    d => d["Exercise Duration Bins"].trim()
  ),
  ([ageGroup, groupByBin]) =>
    Array.from(groupByBin, ([exerciseBin, values]) => ({
      AgeGroup: ageGroup,
      ExerciseBin: exerciseBin,
      AvgProductivity: d3.mean(values, d => +d["Productivity Score"])
    }))
).flat()
 .filter(d => binOrder.includes(d.ExerciseBin) && validAgeGroups.includes(d.AgeGroup));

const completeData = [];
for (const age of validAgeGroups) {
  for (const bin of binOrder) {
    const found = groupedData.find(d => d.AgeGroup === age && d.ExerciseBin === bin);
    completeData.push({
      AgeGroup: age,
      ExerciseBin: bin,
      AvgProductivity: found ? found.AvgProductivity : null
    });
  }
}

function productivityLineChart(data, {width} = {}) {
  return Plot.plot({
    title: "Average Productivity Score by Exercise Duration",
    width: Math.min(width || 500, 500),
    height: 250,
    x: {
      label: "Exercise Duration Bin",
      domain: binOrder, // Force correct order
    },
    y: {
      label: "Avg Productivity Score",
      domain: [4.6,6.2 ]
    },
    color: {legend: true},
    marks: [
      Plot.lineY(data, {
        x: "ExerciseBin",
        y: "AvgProductivity",
        stroke: "AgeGroup",
        curve: "linear"
      }),
      Plot.dot(data, {
        x: "ExerciseBin",
        y: "AvgProductivity",
        fill: "AgeGroup",
        tip: true
      }),
      Plot.ruleY([0])
    ]
  });
}

// --- Top-Right Chart Data ---
const avgByBin = binOrder.map(bin => {
  const filtered = sleepData.filter(d => d["Exercise Duration Bins"].trim() === bin);
  return {
    ExerciseBin: bin,
    AvgSleep: d3.mean(filtered, d => +d["Sleep Quality"]),
    AvgProductivity: d3.mean(filtered, d => +d["Productivity Score"])
  };
});

function sleepProductivityComboChart(data, {width} = {}) {
  return Plot.plot({
    title: "Moderate Exercise Optimizes Both Sleep Quality & Productivity",
    width: Math.min(width || 500, 500),
    height: 250,
    x: {label: "Exercise Duration Bin", domain: binOrder},
    y: {label: "Avg Sleep Quality (1–10 Likert Scale)", domain: [0, 7]},
    marks: [
      Plot.barY(data, {
        x: "ExerciseBin",
        y: "AvgSleep",
        fill: "#c44",
        tip: true
      }),
      Plot.lineY(data, {
        x: "ExerciseBin",
        y: "AvgProductivity",
        stroke: "#7a7",
        strokeWidth: 2,
        curve: "linear"
      }),
      Plot.dot(data, {
        x: "ExerciseBin",
        y: "AvgProductivity",
        fill: "#7a7",
        tip: true
      })
    ]
  });
}

// --- Bottom Chart Data ---
const wellBeingData = [];
for (const bin of binOrder) {
  for (const age of validAgeGroups) {
    const filtered = sleepData.filter(
      d => d["Age Group"].trim() === age && d["Exercise Duration Bins"].trim() === bin
    );
    wellBeingData.push({
      AgeGroup: age,
      ExerciseBin: bin,
      Metric: "Avg Productivity Score",
      Value: d3.mean(filtered, d => +d["Productivity Score"])
    });
    wellBeingData.push({
      AgeGroup: age,
      ExerciseBin: bin,
      Metric: "Avg Sleep Quality",
      Value: d3.mean(filtered, d => +d["Sleep Quality"])
    });
  }
}

function wellBeingBarChart(data, {width} = {}) {
  return Plot.plot({
    title: "Impact of Exercise Duration on Overall Well-being Metrics",
    width: Math.min(width || 500, 500),
    height: 250,
    x: {label: "Exercise Duration", domain: binOrder, padding: 0.3},
    y: {label: "Average Scores (1–10 Likert Scale)", domain: [0, 30]},
    color: {
      domain: validAgeGroups,
      legend: true
    },
    marks: [
      Plot.barY(data.filter(d => d.Metric === "Avg Productivity Score"), {
        x: "ExerciseBin",
        y: "Value",
        fill: "AgeGroup",
        dx: -0.18,
        tip: true
      }),
      Plot.barY(data.filter(d => d.Metric === "Avg Sleep Quality"), {
        x: "ExerciseBin",
        y: "Value",
        fill: "AgeGroup",
        dx: 0.18,
        tip: true,
        fillOpacity: 0.7
      }),
      Plot.ruleY([0])
    ]
  });
}

return {Plot,d3,sleepData,binOrder,validAgeGroups,groupedData,completeData,productivityLineChart,avgByBin,sleepProductivityComboChart,wellBeingData,wellBeingBarChart};
}});

define({id: "f300e41c", inputs: ["html","resize","productivityLineChart","completeData","sleepProductivityComboChart","avgByBin","wellBeingBarChart","wellBeingData","display"], body: async (html,resize,productivityLineChart,completeData,sleepProductivityComboChart,avgByBin,wellBeingBarChart,wellBeingData,display) => {
display(await(
html.fragment`<style>
.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: 24px;
  max-width: 1300px;
  margin: 0 auto;
  padding: 20px;
}

.chart-card {
  background: #111; /* or leave transparent if using dark theme */
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 0 8px rgba(0,0,0,0.4);
}

.full-width {
  grid-column: span 2;
}

@media (max-width: 1000px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
  .full-width {
    grid-column: span 1;
  }
}
</style>

<div class="dashboard-grid">
  <div class="chart-card">
    ${resize(width => productivityLineChart(completeData, { width }))}
  </div>
  <div class="chart-card">
    ${resize(width => sleepProductivityComboChart(avgByBin, { width }))}
  </div>
  <div class="chart-card full-width">
    ${resize(width => wellBeingBarChart(wellBeingData, { width }))}
  </div>
</div>

`
))
}});

</script>
</head>
<body>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<div class="dashboard-title">How Exercise Duration Affects Sleep, Stress &amp; Productivity</div>
<hr>
<p><strong>Name:</strong> Shreya Juka Reddy<br>
<strong>Student ID:</strong> 801391084</p>
<p class="dashboard-description">
  This dashboard analyzes how daily exercise duration influences key well-being metrics—sleep quality, productivity, and stress—across different age groups. Through interactive visualizations, it highlights patterns that suggest optimal activity levels for balancing mental and physical health.
</p>
<style>
.dashboard-title {
  width: 100vw;
  max-width: 100vw;
  font-size: 2.8rem;
  font-weight: bold;
  letter-spacing: 0.01em;
  white-space: nowrap;
  overflow-x: auto;
  text-align: left;
  margin: 0 0 6px 0;
  padding: 12px 0 0 0;
}
.dashboard-description {
  width: 100vw;
  max-width: 100vw;
  font-size: 1.2rem;
  margin-bottom: 10px;
  margin-top: 2px;
  text-align: left;
  padding: 2px;
}
</style>
<div class="observablehq observablehq--block"><!--:09901824:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:f300e41c:--></div>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-05-05T22:18:44">May 5, 2025</a>.</div>
</footer>
</div>
</body>
</html>
